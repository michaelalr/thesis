<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image with Bounding Boxes</title>
    <style>
        /* Container for the image and bounding boxes */
        #image-container {
            position: relative;
            display: inline-block;
            margin: auto; /* Center the container */
        }
        /* The image itself */
        #image {
            display: block;
            width: auto; /* Set to auto to maintain original size */
            height: auto; /* Maintain aspect ratio */
            max-width: 100%; /* Prevent overflow on small screens */
        }
        /* Bounding box styling */
        .bbox {
            position: absolute;
            border: 2px solid red;
            pointer-events: none; /* Prevents interaction with bounding boxes */
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <h1>Image Viewer</h1>
    <div id="image-container">
        <img id="image" src="C:\Users\user2\PycharmProjects\thesis\images\14_segmented_sun_aotwhhmzcyiwovbg.jpg" alt="Image">
    </div>

    <script>
        // Given list of bounding boxes with normalized coordinates - [x, y, width, height] as normalized values
        const bboxData = {
            "bboxes": [[0.37867581844329834, 0.3195631206035614, 0.029564477503299713, 0.19982002675533295], [0.2636528015136719, 0.8364533185958862, 0.07826945930719376, 0.3243085443973541], [0.2634313702583313, 0.6638262867927551, 0.07762224972248077, 0.12032835930585861], [0.14821192622184753, 0.1160941794514656, 0.09920679032802582, 0.2307286560535431], [0.8078172206878662, 0.7583344578742981, 0.05148912966251373, 0.2868650555610657], [0.2468605488538742, 0.24255049228668213, 0.09910973906517029, 0.34367236495018005], [0.049517013132572174, 0.09085460752248764, 0.09794072061777115, 0.18160657584667206], [0.1613887995481491, 0.7123223543167114, 0.12627756595611572, 0.13244695961475372], [0.22646157443523407, 0.2404497265815735, 0.05790569260716438, 0.33762866258621216], [0.17140887677669525, 0.8654860258102417, 0.10433021187782288, 0.266132116317749], [0.8084924221038818, 0.6118291020393372, 0.053418613970279694, 0.09212833642959595], [0.0585276298224926, 0.9176232218742371, 0.11556769907474518, 0.16312065720558167], [0.27484673261642456, 0.2672334909439087, 0.043749842792749405, 0.2911759912967682], [0.34110262989997864, 0.7507063150405884, 0.07561514526605606, 0.27517569065093994]]
        };

        const image = document.getElementById('image');
        const imageContainer = document.getElementById('image-container');

        // Function to draw bounding boxes after the image loads
        function drawBoundingBoxes() {
            // Clear existing bounding boxes
            const existingBoxes = document.querySelectorAll('.bbox');
            existingBoxes.forEach(box => box.remove());

            // Get the actual dimensions of the displayed image
            const rect = image.getBoundingClientRect();
            const displayedWidth = rect.width;
            const displayedHeight = rect.height;

            bboxData.bboxes.forEach(bbox => {
                const [x, y, bboxWidth, bboxHeight] = bbox;

                // Convert normalized coordinates to pixel values
                const left = x * displayedWidth; // Left position of the bounding box
                const top = y * displayedHeight; // Top position of the bounding box
                const width = bboxWidth * displayedWidth; // Width of the bounding box
                const height = bboxHeight * displayedHeight; // Height of the bounding box

                // Log the calculated values for debugging
                console.log(`Bounding Box: [Left: ${left}, Top: ${top}, Width: ${width}, Height: ${height}]`);

                // Create the bounding box element
                const bboxDiv = document.createElement('div');
                bboxDiv.className = 'bbox';

                // Set the bounding box's position and size
                bboxDiv.style.left = `${left}px`;
                bboxDiv.style.top = `${top}px`;
                bboxDiv.style.width = `${width}px`;
                bboxDiv.style.height = `${height}px`;

                // Add the bounding box div to the image container
                imageContainer.appendChild(bboxDiv);
            });
        }

        // Draw bounding boxes when the image loads
        image.onload = drawBoundingBoxes;

        // Redraw bounding boxes on window resize
        window.addEventListener('resize', drawBoundingBoxes);
    </script>
</body>
</html>